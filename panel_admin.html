<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>PANEL ADMIN - Generador de Links Seguros</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; background: #222; color: white; padding: 40px; }
        .container { max-width: 600px; margin: 0 auto; background: #333; padding: 30px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        h1 { text-align: center; color: #0099ff; border-bottom: 2px solid #555; padding-bottom: 10px; }
        label { display: block; margin-top: 15px; font-size: 14px; color: #aaa; }
        input, select { width: 100%; padding: 10px; margin-top: 5px; background: #444; border: 1px solid #666; color: white; border-radius: 5px; box-sizing: border-box;}
        button { width: 100%; padding: 15px; margin-top: 25px; background: #00c853; color: white; border: none; font-weight: bold; font-size: 16px; cursor: pointer; border-radius: 5px; }
        button:hover { background: #00e676; }
        
        .result-box { margin-top: 20px; padding: 15px; background: #111; border: 1px dashed #0099ff; display: none; word-break: break-all; }
        .copy-btn { background: #0099ff; margin-top: 10px; padding: 5px; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ADMINISTRACIÃ“N - Grupo Colbert</h1>
        <p style="text-align:center; font-size:12px; color:#aaa;">Complete los datos para generar el acceso Ãºnico del alumno.</p>

        <label>Registro / Especialidad:</label>
        <select id="registro">
            <option value="tema-remaep">R.E.M.A.E.P (Azul - Salud)</option>
            <option value="tema-rniue">R.N.I.U.E (Dorado - Instructor)</option>
            <option value="tema-rubra">R.U.B.R.A (Rojo - Rescate)</option>
            <option value="tema-rmts">R.M.T.S (Verde - TÃ¡ctico)</option>
            <option value="tema-rce">R.C.E (Amarillo - Chofer)</option>
            <option value="tema-rpde">R.P.D.E (Celeste - Deporte)</option>
        </select>

        <label>TÃ­tulo del Curso (Tal cual saldrÃ¡ en el carnet):</label>
        <input type="text" id="titulo" placeholder="Ej: PARAMÃ‰DICO PROFESIONAL">

        <label>Apellido y Nombres del Alumno:</label>
        <input type="text" id="nombre" placeholder="Ej: PÃ‰REZ JUAN">

        <label>DNI / CÃ©dula:</label>
        <input type="text" id="dni">

        <label>MatrÃ­cula / Legajo:</label>
        <input type="text" id="matricula">

        <label>AÃ±o Lectivo:</label>
        <input type="number" id="anio" value="2026">

        <label>Fecha de Vencimiento:</label>
        <input type="date" id="vence">

        <button onclick="generarLink()">ðŸ”’ GENERAR LINK SEGURO</button>

        <div class="result-box" id="resultado">
            <p style="color:#0099ff; font-weight:bold;">Â¡Link Generado!</p>
            <span id="link-url" style="font-size:12px; color:#ddd;"></span>
            <button class="copy-btn" onclick="copiarLink()">Copiar Link para enviar al Alumno</button>
        </div>
    </div>

    <script>
        function generarLink() {
            // 1. Capturar datos
            const datos = {
                reg: document.getElementById('registro').value,
                tit: document.getElementById('titulo').value.toUpperCase(),
                nom: document.getElementById('nombre').value.toUpperCase(),
                dni: document.getElementById('dni').value,
                mat: document.getElementById('matricula').value,
                anio: document.getElementById('anio').value,
                ven: document.getElementById('vence').value
            };

            // 2. ValidaciÃ³n simple
            if(!datos.nom || !datos.dni) { alert("Faltan datos obligatorios"); return; }

            // 3. Encriptar datos a Base64 (Token simulado)
            // Esto convierte el objeto JSON en una cadena ininteligible tipo "eyJyZWciOiJ0..."
            const token = btoa(JSON.stringify(datos));

            // 4. Crear URL (Asumiendo que los archivos estÃ¡n en la misma carpeta)
            // IMPORTANTE: Cuando lo subas a un hosting, cambia 'vista_alumno.html' por tu dominio real.
            const urlBase = window.location.href.replace('panel_admin.html', 'vista_alumno.html');
            const urlFinal = `${urlBase}?token=${token}`;

            // 5. Mostrar
            document.getElementById('link-url').innerText = urlFinal;
            document.getElementById('resultado').style.display = 'block';
        }

        function copiarLink() {
            const texto = document.getElementById('link-url').innerText;
            navigator.clipboard.writeText(texto);
            alert("Link copiado al portapapeles");
        }
    </script>
</body>
</html>
