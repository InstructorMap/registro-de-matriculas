<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Acad√©mico | Plataforma Educativa</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Markdown Parser for Chat -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --brand-color: #0047AB;
            --brand-hover: #003580;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        .hero-overlay {
            background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.7));
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }
        
        .btn-shine {
            position: relative;
            overflow: hidden;
        }
        
        .btn-shine::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20%;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(30deg);
            transition: all 0.6s;
        }
        
        .btn-shine:hover::after {
            left: 130%;
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .bg-gradient-radial {
            background: radial-gradient(circle at 50% 50%, rgba(0, 71, 171, 0.1) 0%, transparent 70%);
        }
        
        .bg-gradient-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .feature-icon {
            transition: all 0.3s ease;
        }
        
        .feature-icon:hover {
            transform: rotate(10deg) scale(1.1);
        }
        
        .testimonial-card {
            position: relative;
        }
        
        .testimonial-card::before {
            content: '"';
            position: absolute;
            top: -20px;
            left: 20px;
            font-size: 80px;
            color: rgba(0, 71, 171, 0.1);
            font-family: Georgia, serif;
            line-height: 1;
        }
        
        .sticky-nav {
            backdrop-filter: blur(12px);
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .border-gradient {
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #667eea 0%, #764ba2 100%) border-box;
        }
        
        .chat-bubble {
            animation: popIn 0.3s ease-out;
        }
        
        @keyframes popIn {
            from { opacity: 0; transform: translateY(10px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .doc-bounce {
            animation: docBounce 2s infinite;
            display: inline-block;
        }
        
        @keyframes docBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--brand-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-white">

    <!-- Top Bar (Redes Sociales) -->
    <div class="bg-gradient-to-r from-blue-900 to-indigo-900 text-white py-3">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center space-y-2 md:space-y-0">
                <div class="flex items-center space-x-6">
                    <a href="#" class="text-blue-200 hover:text-white transition transform hover:scale-110">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="text-blue-200 hover:text-white transition transform hover:scale-110">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="text-blue-200 hover:text-white transition transform hover:scale-110">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="#" class="text-blue-200 hover:text-white transition transform hover:scale-110">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
                
                <div class="flex flex-col md:flex-row items-center space-y-1 md:space-y-0 md:space-x-6 text-sm">
                    <a href="tel:+549123456789" class="text-blue-200 hover:text-white transition flex items-center space-x-2 hover:underline">
                        <i class="fas fa-phone-alt text-blue-300"></i>
                        <span id="telefono-contacto" class="font-medium">+54 9 123 456 789</span>
                    </a>
                    <a href="mailto:info@institucion.com" class="text-blue-200 hover:text-white transition flex items-center space-x-2 hover:underline">
                        <i class="fas fa-envelope text-blue-300"></i>
                        <span id="email-contacto" class="font-medium">info@institucion.com</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Header Sticky -->
    <header class="sticky top-0 z-50 sticky-nav">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <img id="logo-nav" src="https://via.placeholder.com/180x50?text=LOGO+INSTITUCI√ìN" 
                         alt="Logo" class="h-12 object-contain">
                </div>

                <!-- Desktop Menu -->
                <nav class="hidden lg:flex items-center space-x-8">
                    <a href="#inicio" class="text-gray-700 font-semibold hover:text-blue-600 transition relative group">
                        <span class="relative">
                            Inicio
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300"></span>
                        </span>
                    </a>
                    <a href="#beneficios" class="text-gray-700 font-semibold hover:text-blue-600 transition relative group">
                        <span class="relative">
                            Beneficios
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300"></span>
                        </span>
                    </a>
                    <a href="#cursos" class="text-gray-700 font-semibold hover:text-blue-600 transition relative group">
                        <span class="relative">
                            Cursos
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300"></span>
                        </span>
                    </a>
                    <a href="#testimonios" class="text-gray-700 font-semibold hover:text-blue-600 transition relative group">
                        <span class="relative">
                            Testimonios
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300"></span>
                        </span>
                    </a>
                    <div class="flex items-center space-x-4 ml-4">
                        <a id="btn-campus" href="./student/mi-campus.html" 
                           class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl btn-shine hidden">
                            <i class="fas fa-graduation-cap mr-2"></i>Ir al Campus
                        </a>
                        <a id="btn-whatsapp" href="#" 
                           class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl btn-shine hidden">
                            <i class="fab fa-whatsapp mr-2"></i>WhatsApp
                        </a>
                    </div>
                </nav>

                <!-- Mobile Menu Button -->
                <button id="menu-toggle" class="lg:hidden text-gray-700">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="lg:hidden mt-4 hidden bg-white rounded-xl shadow-2xl p-6 border border-gray-200">
                <div class="flex flex-col space-y-4">
                    <a href="#inicio" class="text-gray-700 font-semibold hover:text-blue-600 transition py-2">Inicio</a>
                    <a href="#beneficios" class="text-gray-700 font-semibold hover:text-blue-600 transition py-2">Beneficios</a>
                    <a href="#cursos" class="text-gray-700 font-semibold hover:text-blue-600 transition py-2">Cursos</a>
                    <a href="#testimonios" class="text-gray-700 font-semibold hover:text-blue-600 transition py-2">Testimonios</a>
                    <div class="pt-4 border-t border-gray-200 space-y-3">
                        <a id="btn-campus-mobile" href="./student/mi-campus.html" 
                           class="block bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold text-center hover:from-blue-700 hover:to-indigo-700 transition-all btn-shine hidden">
                            <i class="fas fa-graduation-cap mr-2"></i>Ir al Campus
                        </a>
                        <a id="btn-whatsapp-mobile" href="#" 
                           class="block bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-semibold text-center hover:from-green-600 hover:to-emerald-700 transition-all btn-shine hidden">
                            <i class="fab fa-whatsapp mr-2"></i>WhatsApp
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="inicio" class="relative overflow-hidden">
        <div class="absolute inset-0">
            <img id="hero-bg" src="https://images.unsplash.com/photo-1576091160550-217358c7db81?auto=format&fit=crop&w=1920&q=80" 
                 alt="Background" class="w-full h-full object-cover">
            <div class="absolute inset-0 hero-overlay"></div>
            <div class="absolute inset-0 bg-gradient-radial opacity-50"></div>
        </div>
        
        <div class="container mx-auto px-4 py-20 md:py-32 relative z-10">
            <div class="max-w-4xl mx-auto text-center">
                <h1 id="hero-title" class="text-4xl md:text-6xl lg:text-7xl font-black text-white mb-6 leading-tight">
                    Transforma Tu <span class="text-gradient">Carrera Profesional</span>
                </h1>
                <p id="hero-description" class="text-xl md:text-2xl text-blue-100 mb-10 max-w-3xl mx-auto leading-relaxed">
                    Educaci√≥n de excelencia con <span class="font-bold text-white">certificaci√≥n reconocida</span>, 
                    enfoque pr√°ctico y oportunidades reales de <span class="font-bold text-white">inserci√≥n laboral inmediata</span>
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <a href="#cursos" class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-10 py-5 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-2xl hover:shadow-3xl transform hover:-translate-y-1 btn-shine">
                        Ver Cursos Disponibles <i class="fas fa-arrow-right ml-2 animate-pulse-slow"></i>
                    </a>
                    <a href="#contacto" class="bg-white/10 backdrop-blur-sm text-white border-2 border-white/30 px-10 py-5 rounded-xl font-bold text-lg hover:bg-white/20 hover:border-white/50 transition-all shadow-lg">
                        Contactar Asesor <i class="fas fa-headset ml-2"></i>
                    </a>
                </div>
                <div class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-6 text-white">
                    <div class="text-center">
                        <div class="text-4xl font-bold mb-2">+500</div>
                        <div class="text-sm opacity-90">Estudiantes</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold mb-2">95%</div>
                        <div class="text-sm opacity-90">Tasa de empleo</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold mb-2">+50</div>
                        <div class="text-sm opacity-90">Convenios</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold mb-2">24/7</div>
                        <div class="text-sm opacity-90">Soporte</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Wave Divider -->
        <div class="absolute bottom-0 left-0 right-0">
            <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 120H1440V60C1440 60 1152 0 720 0C288 0 0 60 0 60V120Z" fill="white"/>
            </svg>
        </div>
    </section>

    <!-- Barra de Confianza -->
    <section class="py-10 bg-gradient-to-r from-gray-50 to-white border-b border-gray-200">
        <div class="container mx-auto px-4">
            <div class="text-center mb-8">
                <p class="text-gray-600 font-medium uppercase tracking-wider text-sm">Nuestros egresados trabajan en:</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-8 items-center justify-items-center opacity-70">
                <div class="text-3xl font-bold text-gray-400">üè• Hospitales</div>
                <div class="text-3xl font-bold text-gray-400">üëÆ‚Äç‚ôÇÔ∏è Polic√≠a</div>
                <div class="text-3xl font-bold text-gray-400">üöí Bomberos</div>
                <div class="text-3xl font-bold text-gray-400">üèõÔ∏è Municipalidades</div>
                <div class="text-3xl font-bold text-gray-400">üè¢ Cl√≠nicas</div>
            </div>
        </div>
    </section>

    <!-- Beneficios -->
    <section id="beneficios" class="py-20 bg-gradient-section">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-4">
                    ¬øPor qu√© elegir <span class="text-gradient">nuestra formaci√≥n?</span>
                </h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">
                    No solo estudias, te preparas para el √©xito profesional desde el d√≠a uno
                </p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Beneficio 1 -->
                <div class="bg-white p-8 rounded-2xl shadow-xl card-hover border border-gray-100">
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mb-6 feature-icon">
                        <i class="fas fa-certificate text-3xl text-blue-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Certificaci√≥n Reconocida</h3>
                    <p class="text-gray-600 mb-4">
                        Diploma oficial con validez nacional e internacional, avalado por instituciones reconocidas.
                    </p>
                    <div class="flex items-center text-blue-600 font-semibold">
                        <span>Ver certificados</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <!-- Beneficio 2 -->
                <div class="bg-white p-8 rounded-2xl shadow-xl card-hover border border-gray-100">
                    <div class="w-16 h-16 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mb-6 feature-icon">
                        <i class="fas fa-briefcase text-3xl text-green-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Salida Laboral Garantizada</h3>
                    <p class="text-gray-600 mb-4">
                        Programa de pr√°cticas profesionales + bolsa de trabajo con m√°s de 50 empresas asociadas.
                    </p>
                    <div class="flex items-center text-green-600 font-semibold">
                        <span>Ver convenios</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <!-- Beneficio 3 -->
                <div class="bg-white p-8 rounded-2xl shadow-xl card-hover border border-gray-100">
                    <div class="w-16 h-16 bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl flex items-center justify-center mb-6 feature-icon">
                        <i class="fas fa-user-graduate text-3xl text-purple-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Aprendizaje Personalizado</h3>
                    <p class="text-gray-600 mb-4">
                        Clases en vivo, tutor√≠as personalizadas y acceso 24/7 a contenido de alta calidad.
                    </p>
                    <div class="flex items-center text-purple-600 font-semibold">
                        <span>Ver metodolog√≠a</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Cursos Grid -->
    <section id="cursos" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-4">
                    Nuestros <span class="text-gradient">Programas Destacados</span>
                </h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">
                    Formaci√≥n especializada dise√±ada por expertos para el √©xito profesional inmediato
                </p>
            </div>

            <!-- Loader -->
            <div id="loader-cursos" class="text-center py-12">
                <div class="loader mx-auto mb-4"></div>
                <p class="text-gray-500 font-medium">Cargando cat√°logo de cursos...</p>
            </div>

            <!-- Cursos Grid Container -->
            <div id="cursos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Los cursos se cargar√°n aqu√≠ din√°micamente -->
            </div>

            <!-- Mensaje sin cursos -->
            <div id="no-cursos" class="hidden text-center py-16">
                <div class="w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-book-open text-4xl text-gray-400"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-700 mb-3">Pr√≥ximamente nuevos programas</h3>
                <p class="text-gray-500 max-w-md mx-auto">Estamos preparando contenido especializado para potenciar tu carrera profesional.</p>
            </div>
        </div>
    </section>

    <!-- Testimonios -->
    <section id="testimonios" class="py-20 bg-gradient-to-br from-gray-50 to-blue-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-4">
                    Lo que dicen <span class="text-gradient">nuestros estudiantes</span>
                </h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">
                    Historias reales de transformaci√≥n profesional
                </p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Testimonio 1 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg testimonial-card">
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 overflow-hidden mr-4">
                            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?auto=format&fit=crop&w=150&q=80" 
                                 alt="Ana" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-900">Ana Mart√≠nez</h4>
                            <p class="text-sm text-gray-600">Enfermera - Hospital Central</p>
                        </div>
                    </div>
                    <p class="text-gray-700 italic mb-4">
                        "Gracias al curso de Auxiliar de Enfermer√≠a consegu√≠ trabajo en menos de un mes. La formaci√≥n fue pr√°ctica y el certificado me abri√≥ muchas puertas."
                    </p>
                    <div class="flex text-yellow-400">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                
                <!-- Testimonio 2 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg testimonial-card">
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 overflow-hidden mr-4">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=150&q=80" 
                                 alt="Carlos" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-900">Carlos Rodr√≠guez</h4>
                            <p class="text-sm text-gray-600">Investigador Forense</p>
                        </div>
                    </div>
                    <p class="text-gray-700 italic mb-4">
                        "La certificaci√≥n en Criminal√≠stica me permiti√≥ ascender en mi trabajo. Los profesores son profesionales activos que comparten casos reales."
                    </p>
                    <div class="flex text-yellow-400">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                
                <!-- Testimonio 3 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg testimonial-card">
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 overflow-hidden mr-4">
                            <img src="https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=150&q=80" 
                                 alt="Mar√≠a" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-900">Mar√≠a Gonz√°lez</h4>
                            <p class="text-sm text-gray-600">Coordinadora de Emergencias</p>
                        </div>
                    </div>
                    <p class="text-gray-700 italic mb-4">
                        "El programa de Rescate y Emergencias me dio las herramientas para coordinar equipos en situaciones cr√≠ticas. ¬°Recomiendo 100%!"
                    </p>
                    <div class="flex text-yellow-400">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Final -->
    <section class="py-20 bg-gradient-to-r from-blue-900 to-indigo-900 text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-black mb-6">
                ¬øListo para transformar tu carrera?
            </h2>
            <p class="text-xl text-blue-100 mb-10 max-w-2xl mx-auto">
                √önete a cientos de profesionales que ya alcanzaron sus metas con nuestra formaci√≥n
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <a href="#cursos" class="bg-white text-blue-900 px-10 py-5 rounded-xl font-bold text-lg hover:bg-blue-50 transition-all shadow-2xl hover:shadow-3xl transform hover:-translate-y-1">
                    Ver todos los cursos <i class="fas fa-arrow-right ml-2"></i>
                </a>
                <a href="#contacto" class="bg-transparent border-2 border-white text-white px-10 py-5 rounded-xl font-bold text-lg hover:bg-white/10 transition-all">
                    <i class="fas fa-phone-alt mr-2"></i> Llamar ahora
                </a>
            </div>
        </div>
    </section>

    <!-- Vista Detalle Curso (Modal) -->
    <div id="modal-curso" class="fixed inset-0 bg-black bg-opacity-70 z-[9998] hidden overflow-y-auto">
        <div class="container mx-auto px-4 py-12 min-h-screen flex items-center">
            <div class="bg-white rounded-2xl shadow-2xl max-w-6xl mx-auto w-full animate-fade-in">
                <div class="relative">
                    <button id="close-modal" class="absolute top-6 right-6 text-gray-500 hover:text-gray-700 text-2xl z-10 bg-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg">
                        <i class="fas fa-times"></i>
                    </button>
                    
                    <div class="grid md:grid-cols-3 gap-0">
                        <!-- Contenido del curso -->
                        <div class="md:col-span-2 p-8">
                            <div id="modal-loader" class="text-center py-12">
                                <div class="loader mx-auto mb-4"></div>
                                <p class="text-gray-500 font-medium">Cargando informaci√≥n del curso...</p>
                            </div>
                            
                            <div id="modal-content" class="hidden">
                                <h2 id="modal-titulo" class="text-3xl font-bold text-gray-900 mb-4"></h2>
                                <div id="modal-descripcion" class="text-gray-600 mb-6 prose prose-lg max-w-none"></div>
                                
                                <div class="mb-8">
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                        <i class="fas fa-book-open text-blue-600 mr-3"></i>
                                        Plan de Estudios
                                    </h3>
                                    <div id="modal-temario" class="space-y-3">
                                        <!-- Temario se cargar√° aqu√≠ -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Formulario de inscripci√≥n -->
                        <div class="bg-gradient-to-b from-blue-900 to-indigo-900 text-white p-8 rounded-r-2xl">
                            <h3 class="text-2xl font-bold mb-2">Solicitar Inscripci√≥n</h3>
                            <p class="text-blue-200 mb-6">Obt√©n tu vacante hoy mismo</p>
                            
                            <form id="form-inscripcion" class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-blue-200 mb-2">Nombre completo *</label>
                                    <input type="text" name="nombre" required 
                                           class="w-full bg-blue-800/30 border border-blue-700/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 transition">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-blue-200 mb-2">Email *</label>
                                    <input type="email" name="email" required 
                                           class="w-full bg-blue-800/30 border border-blue-700/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 transition">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-blue-200 mb-2">Tel√©fono *</label>
                                    <input type="tel" name="telefono" required 
                                           class="w-full bg-blue-800/30 border border-blue-700/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 transition">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-blue-200 mb-2">Curso de inter√©s</label>
                                    <input type="text" id="curso-interes" readonly
                                           class="w-full bg-blue-800/30 border border-blue-700/50 rounded-lg px-4 py-3 text-white font-semibold">
                                </div>
                                
                                <button type="submit" 
                                        class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-lg font-bold text-lg mt-6 hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl btn-shine">
                                    <i class="fas fa-paper-plane mr-2"></i> Enviar Solicitud
                                </button>
                                
                                <p class="text-xs text-blue-300 text-center mt-4">
                                    <i class="fas fa-lock mr-1"></i> Tus datos est√°n protegidos
                                </p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contacto" class="bg-gray-900 text-white pt-16 pb-8">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <!-- Columna 1: Nosotros -->
                <div>
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-university text-blue-400 mr-3"></i>
                        <span id="footer-nombre">Instituci√≥n</span>
                    </h3>
                    <p id="footer-descripcion" class="text-gray-300 mb-6">
                        Formaci√≥n profesional de excelencia con m√°s de 10 a√±os de experiencia
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition transform hover:scale-110">
                            <i class="fab fa-facebook-f text-lg"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition transform hover:scale-110">
                            <i class="fab fa-instagram text-lg"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition transform hover:scale-110">
                            <i class="fab fa-linkedin-in text-lg"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition transform hover:scale-110">
                            <i class="fab fa-youtube text-lg"></i>
                        </a>
                    </div>
                </div>

                <!-- Columna 2: Enlaces r√°pidos -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Enlaces R√°pidos</h3>
                    <ul class="space-y-3">
                        <li><a href="#inicio" class="text-gray-300 hover:text-white transition hover:underline">Inicio</a></li>
                        <li><a href="#beneficios" class="text-gray-300 hover:text-white transition hover:underline">Beneficios</a></li>
                        <li><a href="#cursos" class="text-gray-300 hover:text-white transition hover:underline">Cursos</a></li>
                        <li><a href="#testimonios" class="text-gray-300 hover:text-white transition hover:underline">Testimonios</a></li>
                        <li><a href="./student/mi-campus.html" class="text-blue-300 hover:text-blue-100 transition hover:underline font-semibold">
                            <i class="fas fa-graduation-cap mr-2"></i>Campus Virtual
                        </a></li>
                    </ul>
                </div>

                <!-- Columna 3: Contacto -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Contacto</h3>
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <i class="fas fa-map-marker-alt text-blue-400 mt-1"></i>
                            <span id="footer-direccion" class="text-gray-300">Av. Principal 123, Ciudad</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-phone text-blue-400"></i>
                            <span id="footer-telefono" class="text-gray-300">+54 9 123 456 789</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-envelope text-blue-400"></i>
                            <span id="footer-email" class="text-gray-300">info@institucion.com</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-800 pt-8 text-center">
                <p class="text-gray-400">
                    &copy; <span id="current-year"></span> 
                    <span id="footer-institucion">Nombre Instituci√≥n</span>. 
                    Todos los derechos reservados.
                </p>
                <p class="text-gray-500 text-sm mt-2">
                    Plataforma desarrollada por <a href="https://asari.com.ar" class="text-blue-300 hover:text-blue-100 transition hover:underline font-semibold">ASARI SaaS</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Float -->
    <a id="whatsapp-float" href="#" 
       class="fixed bottom-24 right-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl hover:from-green-600 hover:to-emerald-700 transition-all z-40 hidden animate-float">
        <i class="fab fa-whatsapp text-2xl"></i>
    </a>

    <!-- Chatbot IA "Doc" -->
    <button id="btn-tutor-toggle" onclick="toggleTutor()" 
            class="fixed bottom-6 right-6 z-[9999] group transition-all duration-300 hover:scale-110 cursor-pointer">
        <div class="relative">
            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-900 to-indigo-900 p-1 shadow-2xl border-4 border-white/20 overflow-hidden relative z-10 flex items-center justify-center">
                 <div class="w-full h-full bg-gradient-to-br from-white to-blue-100 rounded-full flex items-center justify-center relative overflow-hidden">
                    <span class="text-3xl doc-bounce select-none">ü¶â</span>
                    <span id="doc-badge-btn" class="absolute bottom-1 right-2 text-sm bg-white rounded-full w-5 h-5 flex items-center justify-center shadow-sm border border-blue-100">üéì</span>
                 </div>
            </div>
            <div class="absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-blue-900 rounded-full z-20 animate-pulse"></div>
            <div class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center animate-pulse">
                <i class="fas fa-comment-dots"></i>
            </div>
        </div>
    </button>

    <div id="tutor-window" class="fixed bottom-28 right-6 z-[9998] w-80 md:w-96 bg-white border border-gray-200 rounded-2xl shadow-2xl flex flex-col hidden origin-bottom-right transform scale-95 opacity-0 h-[500px] transition-all duration-300">
        <div class="p-4 bg-gradient-to-r from-blue-600 to-indigo-600 border-b border-white/20 rounded-t-2xl flex justify-between items-center" id="tutor-header">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-white p-0.5 border border-white/20 overflow-hidden flex items-center justify-center relative">
                    <span class="text-xl select-none">ü¶â</span>
                    <span id="doc-badge-header" class="absolute -bottom-1 -right-1 text-[10px] bg-white rounded-full w-4 h-4 flex items-center justify-center border border-indigo-100">üéì</span>
                </div>
                <div>
                    <h3 class="font-bold text-white text-sm" id="tutor-name">Doc - Asistente de Admisiones</h3>
                    <p class="text-[10px] text-white/80 font-medium">En l√≠nea ‚Ä¢ Te ayudo a elegir tu curso</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="borrarHistorial()" class="text-white/60 hover:text-white p-1" title="Borrar Chat">
                    <i class="fas fa-trash-alt text-sm"></i>
                </button>
                <button onclick="toggleTutor()" class="text-white/60 hover:text-white p-1">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
        </div>
        
        <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 text-sm">
            <div class="flex gap-3 chat-bubble">
                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 overflow-hidden shrink-0 border border-blue-300 mt-1 flex items-center justify-center relative">
                    <span class="text-sm">ü¶â</span>
                    <span class="absolute -bottom-1 -right-1 text-[8px] bg-white rounded-full w-3 h-3 flex items-center justify-center border border-blue-100">üéì</span>
                </div>
                <div class="bg-white text-gray-700 text-sm p-3 rounded-2xl rounded-tl-none border border-gray-200 shadow-sm max-w-[90%] prose prose-sm leading-snug">
                    ¬°Hola! Soy <strong>Doc</strong>, tu asistente de admisiones. üòä

Estoy aqu√≠ para ayudarte a:
‚úÖ Elegir el curso ideal para tus objetivos
‚úÖ Explicar m√©todos de pago y financiaci√≥n  
‚úÖ Contarte sobre certificaciones y salida laboral
‚úÖ Motivarte a dar el siguiente paso en tu carrera

¬øEn qu√© puedo asistirte hoy?
                </div>
            </div>
        </div>
        
        <div class="px-3 py-2 bg-gray-100 flex gap-2 overflow-x-auto border-t border-gray-200 no-scrollbar">
            <button onclick="accionarTutor('popular')" class="text-xs bg-white hover:bg-blue-50 text-blue-600 border border-gray-300 px-3 py-2 rounded-full whitespace-nowrap flex items-center gap-1 transition">
                <i class="fas fa-fire text-orange-500"></i> Cursos m√°s populares
            </button>
            <button onclick="accionarTutor('financiacion')" class="text-xs bg-white hover:bg-green-50 text-green-600 border border-gray-300 px-3 py-2 rounded-full whitespace-nowrap flex items-center gap-1 transition">
                <i class="fas fa-credit-card"></i> Financiaci√≥n
            </button>
            <button onclick="accionarTutor('certificacion')" class="text-xs bg-white hover:bg-purple-50 text-purple-600 border border-gray-300 px-3 py-2 rounded-full whitespace-nowrap flex items-center gap-1 transition">
                <i class="fas fa-certificate"></i> Certificados
            </button>
        </div>
        
        <div class="p-3 bg-white border-t border-gray-200 rounded-b-2xl">
            <form id="chat-form" class="flex gap-2 relative" onsubmit="enviarMensajeTutor(event)">
                <input type="text" id="chat-input" class="flex-1 bg-gray-100 border border-gray-300 rounded-xl pl-4 pr-10 py-3 text-sm text-gray-800 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 transition shadow-inner" placeholder="Preg√∫ntale a Doc sobre cursos, precios, inscripci√≥n..." autocomplete="off">
                <button type="submit" class="absolute right-4 top-1/2 -translate-y-1/2 text-blue-500 hover:text-blue-600" id="btn-send-chat">
                    <i class="fas fa-paper-plane text-lg"></i>
                </button>
            </form>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN SUPABASE
        // ============================================
        const SUPABASE_URL = 'https://vxggatcfrywyodovjwxj.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4Z2dhdGNmcnl3eW9kb3Zqd3hqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgyMzM5MjgsImV4cCI6MjA4MzgwOTkyOH0.RZ9jhEASO6nCV8EnzrHQBhglP4G1nik9Z5osPXysGNg';
        const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // ID de respaldo (Colbert)
        const ID_BACKUP = 'cfa8addf-9d36-41e1-83b1-6501e5178ba7';

        // Variables globales
        let instGlobal = null;
        let cursoModal = null;
        let cursosLista = []; // Para contexto del chatbot

        // Variables del Chatbot
        let isChatOpen = false;
        let institutionContext = "";
        let cursosContext = "";

        // ============================================
        // 1. INICIALIZACI√ìN ROBUSTA
        // ============================================
        async function initPortal() {
            console.log("üöÄ Portal SaaS iniciando...");
            
            // Configurar a√±o actual en footer
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            const params = new URLSearchParams(window.location.search);
            const instParam = params.get('inst');
            const courseId = params.get('id');

            try {
                let institucion = null;
                
                // Detectar si hay par√°metro de instituci√≥n
                if (instParam) {
                    // Verificar si es UUID
                    const esUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(instParam);
                    
                    if (esUUID) {
                        const { data } = await db
                            .from('instituciones')
                            .select('*')
                            .eq('id', instParam)
                            .maybeSingle();
                        institucion = data;
                    } else {
                        // Buscar por sigla o slug
                        const { data } = await db
                            .from('instituciones')
                            .select('*')
                            .or(`sigla.eq.${instParam},slug.eq.${instParam}`)
                            .maybeSingle();
                        institucion = data;
                    }
                }

                // Si no se encontr√≥ instituci√≥n, usar el ID de respaldo
                if (!institucion) {
                    console.warn("‚ö†Ô∏è Usando ID de respaldo...");
                    const { data } = await db
                        .from('instituciones')
                        .select('*')
                        .eq('id', ID_BACKUP)
                        .single();
                    institucion = data;
                }

                if (!institucion) {
                    throw new Error("Instituci√≥n no encontrada");
                }

                instGlobal = institucion;
                institutionContext = `Instituci√≥n: ${institucion.nombre}. ${institucion.descripcion || ''}`;
                aplicarBranding(institucion);
                
                // Si hay ID de curso, mostrar modal
                if (courseId) {
                    await cargarDetalleCurso(courseId);
                } else {
                    await cargarContenido(institucion.id);
                }

            } catch (err) {
                console.error("‚ùå Error cr√≠tico:", err);
                document.getElementById('cursos-grid').innerHTML = `
                    <div class="col-span-full text-center py-20">
                        <div class="text-red-500 text-6xl mb-4">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2">Error al cargar el portal</h3>
                        <p class="text-gray-500">Por favor, intenta nuevamente o contacta al administrador.</p>
                    </div>
                `;
            }
            
            // Inicializar eventos
            inicializarEventos();
            
            // Inicializar chatbot
            inicializarChatbot();
        }

        // ============================================
        // 2. BRANDING DIN√ÅMICO
        // ============================================
        function aplicarBranding(inst) {
            console.log("üé® Aplicando branding para:", inst.nombre);
            
            // Configurar variable CSS global
            const root = document.documentElement;
            const color = inst.color_primario || '#0047AB';
            const colorHover = inst.color_secundario || '#003580';
            
            root.style.setProperty('--brand-color', color);
            root.style.setProperty('--brand-hover', colorHover);
            
            // Logo principal
            const logoNav = document.getElementById('logo-nav');
            if (logoNav && inst.logo_url && inst.logo_url.startsWith('http')) {
                logoNav.src = inst.logo_url;
                logoNav.alt = inst.nombre;
            }
            
            // Banner Hero
            const heroBg = document.getElementById('hero-bg');
            if (heroBg) {
                const bgUrl = (inst.banner_url && inst.banner_url.startsWith('http')) 
                    ? inst.banner_url 
                    : 'https://images.unsplash.com/photo-1576091160550-217358c7db81?auto=format&fit=crop&w=1920&q=80';
                heroBg.src = bgUrl;
            }
            
            // Textos din√°micos
            document.title = `${inst.nombre} | Portal Acad√©mico Premium`;
            
            const nombreInstitucion = document.getElementById('nombre-institucion');
            if (nombreInstitucion) {
                nombreInstitucion.textContent = inst.nombre;
                nombreInstitucion.style.color = color;
            }
            
            // Contacto
            const telefonoContacto = document.getElementById('telefono-contacto');
            const emailContacto = document.getElementById('email-contacto');
            if (telefonoContacto && inst.telefono_contacto) {
                telefonoContacto.textContent = inst.telefono_contacto;
            }
            if (emailContacto && inst.email_contacto) {
                emailContacto.textContent = inst.email_contacto;
            }
            
            // Bot√≥n WhatsApp
            const whatsappBtn = document.getElementById('btn-whatsapp');
            const whatsappMobile = document.getElementById('btn-whatsapp-mobile');
            const whatsappFloat = document.getElementById('whatsapp-float');
            
            if (inst.telefono_contacto) {
                const wppNum = inst.telefono_contacto.replace(/[^0-9]/g, '');
                const mensaje = encodeURIComponent(`Hola, me interesa informaci√≥n sobre los cursos de ${inst.nombre}`);
                const wppLink = `https://wa.me/${wppNum}?text=${mensaje}`;
                
                if (whatsappBtn) {
                    whatsappBtn.href = wppLink;
                    whatsappBtn.classList.remove('hidden');
                }
                if (whatsappMobile) {
                    whatsappMobile.href = wppLink;
                    whatsappMobile.classList.remove('hidden');
                }
                if (whatsappFloat) {
                    whatsappFloat.href = wppLink;
                    whatsappFloat.classList.remove('hidden');
                }
            }
            
            // Bot√≥n Campus
            const campusBtn = document.getElementById('btn-campus');
            const campusMobile = document.getElementById('btn-campus-mobile');
            if (campusBtn && campusMobile) {
                campusBtn.classList.remove('hidden');
                campusMobile.classList.remove('hidden');
            }
            
            // Footer
            const footerNombre = document.getElementById('footer-nombre');
            const footerInstitucion = document.getElementById('footer-institucion');
            if (footerNombre) footerNombre.textContent = inst.nombre;
            if (footerInstitucion) footerInstitucion.textContent = inst.nombre;
            
            if (inst.direccion) {
                const footerDireccion = document.getElementById('footer-direccion');
                if (footerDireccion) footerDireccion.textContent = inst.direccion;
            }
        }

        // ============================================
        // 3. CARGA DE CONTENIDO (PREMIUM)
        // ============================================
        async function cargarContenido(instId) {
            console.log("üì¶ Cargando contenido para instituci√≥n:", instId);
            
            const container = document.getElementById('cursos-grid');
            const loader = document.getElementById('loader-cursos');
            const noCursos = document.getElementById('no-cursos');
            
            try {
                // Peticiones paralelas
                const [areasReq, cursosReq] = await Promise.all([
                    db.from('areas')
                      .select('*')
                      .eq('institution_id', instId)
                      .order('orden', { ascending: true }),
                    
                    db.from('cursos_oficiales')
                      .select('*')
                      .eq('institution_id', instId)
                ]);

                const areas = areasReq.data || [];
                const cursos = cursosReq.data || [];
                cursosLista = cursos; // Guardar para el chatbot

                // Construir contexto para el chatbot
                cursosContext = "Cursos disponibles: " + cursos.map(c => c.nombre).join(", ");

                console.log(`üìä Datos recibidos: ${areas.length} √°reas, ${cursos.length} cursos`);

                // Ocultar loader
                if (loader) loader.style.display = 'none';
                
                // Verificar si hay cursos
                if (cursos.length === 0) {
                    if (noCursos) noCursos.classList.remove('hidden');
                    return;
                }

                container.innerHTML = '';
                let cursosRenderizados = 0;

                // ESTRATEGIA 1: Renderizar por √°reas (Si hay √°reas definidas)
                if (areas.length > 0) {
                    areas.forEach(area => {
                        const cursosArea = cursos.filter(c => c.area_id === area.id);
                        
                        if (cursosArea.length > 0) {
                            cursosRenderizados += cursosArea.length;
                            
                            // T√≠tulo del √°rea
                            const areaTitle = document.createElement('h3');
                            areaTitle.className = 'text-2xl font-bold text-gray-900 mt-12 mb-6 border-l-4 border-blue-600 pl-4 uppercase col-span-full';
                            areaTitle.textContent = area.nombre;
                            container.appendChild(areaTitle);
                            
                            // Grid de cursos del √°rea
                            const grid = document.createElement('div');
                            grid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8 col-span-full';
                            
                            cursosArea.forEach(curso => {
                                grid.appendChild(crearTarjetaCurso(curso));
                            });
                            
                            container.appendChild(grid);
                        }
                    });
                }
                
                // ESTRATEGIA 2: Si no hay √°reas o quedaron cursos sin asignar, mostrar todo junto
                if (cursosRenderizados === 0 && cursos.length > 0) {
                    console.log("‚ö†Ô∏è Mostrando cursos sin agrupar por √°reas");
                    const grid = document.createElement('div');
                    grid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 col-span-full';
                    
                    cursos.forEach(curso => {
                        grid.appendChild(crearTarjetaCurso(curso));
                    });
                    
                    container.appendChild(grid);
                }
                
            } catch (err) {
                console.error("‚ùå Error cargando contenido:", err);
                if (loader) loader.style.display = 'none';
                if (noCursos) noCursos.classList.remove('hidden');
            }
        }

        // Funci√≥n auxiliar para generar el HTML de la tarjeta (DISE√ëO PREMIUM)
        function crearTarjetaCurso(curso) {
            const card = document.createElement('div');
            
            // 1. Definir la URL de imagen
            const imgUrl = curso.imagen_portada_url || curso.imagen_url || 'https://images.unsplash.com/photo-1576091160550-217358c7db81?auto=format&fit=crop&w=800&q=80';
            
            // 2. Determinar etiquetas premium
            const etiquetas = [];
            if (curso.popular) etiquetas.push({text: 'üî• M√°s Vendido', color: 'from-orange-500 to-red-500'});
            if (curso.cupos_limite && curso.cupos_limite < 10) etiquetas.push({text: '‚ö° Cupos Limitados', color: 'from-purple-500 to-pink-500'});
            if (curso.precio_oferta) etiquetas.push({text: 'üí∞ Oferta Especial', color: 'from-green-500 to-emerald-600'});
            if (!etiquetas.length) etiquetas.push({text: 'üéì Certificaci√≥n', color: 'from-blue-500 to-indigo-600'});
            
            // 3. Manejar precios
            const precioOriginal = curso.precio_original ? parseFloat(curso.precio_original) : null;
            const precioOferta = curso.precio_oferta ? parseFloat(curso.precio_oferta) : null;
            const tieneOferta = precioOferta && precioOriginal && precioOferta < precioOriginal;
            
            // 4. Generar el HTML de la tarjeta
            card.innerHTML = `
                <div class="group relative bg-white border-2 border-gray-100 rounded-2xl overflow-hidden hover:shadow-2xl hover:shadow-blue-900/20 transition-all duration-500 hover:-translate-y-2 h-full flex flex-col card-hover">
                    
                    <!-- Imagen con overlay -->
                    <div class="h-48 overflow-hidden relative">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent z-10"></div>
                        <img 
                            src="${imgUrl}" 
                            alt="${curso.nombre}" 
                            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                            onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1576091160550-217358c7db81?auto=format&fit=crop&w=800&q=80';"
                        >
                        
                        <!-- Etiquetas premium -->
                        <div class="absolute top-3 left-3 z-20 flex flex-col gap-1">
                            ${etiquetas.map(etiqueta => `
                                <span class="bg-gradient-to-r ${etiqueta.color} text-white text-[10px] font-bold px-3 py-1 rounded-full backdrop-blur-sm shadow-lg">
                                    ${etiqueta.text}
                                </span>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Contenido de la tarjeta -->
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-xl font-bold text-gray-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors">${curso.nombre}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-2 flex-1">${curso.descripcion || 'Formaci√≥n profesional de alto nivel con certificaci√≥n reconocida.'}</p>
                        
                        <!-- Precios -->
                        <div class="mt-4 mb-4">
                            ${tieneOferta ? `
                                <div class="flex items-center gap-3">
                                    <span class="text-2xl font-black text-gray-900">$${precioOferta.toFixed(2)}</span>
                                    <span class="text-sm text-gray-500 line-through">$${precioOriginal.toFixed(2)}</span>
                                    <span class="text-xs font-bold bg-gradient-to-r from-green-500 to-emerald-600 text-white px-2 py-1 rounded">AHORRA ${Math.round((1 - precioOferta/precioOriginal) * 100)}%</span>
                                </div>
                            ` : precioOriginal ? `
                                <div class="text-2xl font-black text-gray-900">$${precioOriginal.toFixed(2)}</div>
                            ` : `
                                <div class="text-lg font-bold text-blue-600">Consultanos por precio</div>
                            `}
                        </div>
                        
                        <!-- Informaci√≥n adicional -->
                        <div class="mt-auto pt-4 border-t border-gray-100 flex justify-between items-center">
                             <span class="text-xs text-gray-500 font-medium flex items-center gap-1">
                                <i class="fas fa-clock text-blue-500"></i>
                                ${curso.duracion || 'A tu ritmo'}
                             </span>
                             <button onclick="abrirModalCurso('${curso.id}')" class="text-blue-600 text-sm font-bold flex items-center gap-2 group-hover:gap-3 transition-all hover:text-blue-700">
                                VER DETALLES <i class="fas fa-arrow-right text-xs transition-transform group-hover:translate-x-1"></i>
                             </button>
                        </div>
                    </div>
                    
                    <!-- Enlace invisible para hacer toda la tarjeta clickeable -->
                    <a onclick="abrirModalCurso('${curso.id}')" class="absolute inset-0 z-30 cursor-pointer"></a>
                </div>
            `;
            
            return card;
        }

        // ============================================
        // 4. MODAL DE DETALLE DE CURSO
        // ============================================
        async function cargarDetalleCurso(cursoId) {
            const modal = document.getElementById('modal-curso');
            const modalLoader = document.getElementById('modal-loader');
            const modalContent = document.getElementById('modal-content');
            const cursoInteres = document.getElementById('curso-interes');
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            try {
                const { data: curso, error } = await db
                    .from('cursos_oficiales')
                    .select('*')
                    .eq('id', cursoId)
                    .single();
                
                if (error || !curso) {
                    throw new Error('Curso no encontrado');
                }
                
                cursoModal = curso;
                
                // Mostrar contenido
                modalLoader.classList.add('hidden');
                modalContent.classList.remove('hidden');
                
                // Actualizar informaci√≥n
                document.getElementById('modal-titulo').textContent = curso.nombre;
                document.getElementById('modal-descripcion').innerHTML = 
                    curso.descripcion || '<p class="text-gray-500">No hay descripci√≥n disponible.</p>';
                
                // Actualizar campo del formulario
                if (cursoInteres) {
                    cursoInteres.value = curso.nombre;
                }
                
                // Cargar temario si existe
                const temarioContainer = document.getElementById('modal-temario');
                if (temarioContainer) {
                    temarioContainer.innerHTML = '';
                    
                    if (curso.contenido && Array.isArray(curso.contenido) && curso.contenido.length > 0) {
                        curso.contenido.forEach((modulo, index) => {
                            const moduloElement = document.createElement('div');
                            moduloElement.className = 'bg-gradient-to-r from-gray-50 to-white rounded-xl p-4 flex justify-between items-center border border-gray-200 hover:border-blue-300 transition cursor-pointer';
                            moduloElement.innerHTML = `
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center font-bold">
                                        ${index + 1}
                                    </div>
                                    <div>
                                        <span class="font-semibold text-gray-800">${modulo.titulo || 'M√≥dulo sin t√≠tulo'}</span>
                                        <p class="text-xs text-gray-500 mt-1">${modulo.lecciones ? modulo.lecciones.length + ' lecciones' : 'Contenido disponible'}</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            `;
                            temarioContainer.appendChild(moduloElement);
                        });
                    } else {
                        temarioContainer.innerHTML = `
                            <div class="text-center py-8 text-gray-500 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-200">
                                <i class="fas fa-book-open text-4xl mb-3 text-blue-400"></i>
                                <p class="font-medium">Contenido program√°tico disponible al inscribirse</p>
                                <p class="text-sm mt-1">Temario detallado y material de estudio incluido</p>
                            </div>
                        `;
                    }
                }
                
            } catch (err) {
                console.error("‚ùå Error cargando curso:", err);
                modalLoader.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-circle text-red-500 text-4xl mb-4"></i>
                        <p class="text-red-500 font-medium">Error al cargar el curso</p>
                        <p class="text-gray-500 text-sm mt-2">Por favor, intenta nuevamente</p>
                    </div>
                `;
            }
        }

        // ============================================
        // 5. CHATBOT IA "DOC" - FUNCIONES
        // ============================================
        function inicializarChatbot() {
            console.log("ü§ñ Chatbot inicializado");
        }

        function toggleTutor() {
            const win = document.getElementById('tutor-window');
            isChatOpen = !isChatOpen;
            
            if(isChatOpen) {
                win.classList.remove('hidden');
                requestAnimationFrame(() => {
                    win.classList.remove('scale-95', 'opacity-0');
                    win.classList.add('scale-100', 'opacity-100');
                    document.getElementById('chat-input').focus();
                });
            } else {
                win.classList.add('scale-95', 'opacity-0');
                setTimeout(() => win.classList.add('hidden'), 300);
            }
        }

        async function enviarMensajeTutor(e) {
            e.preventDefault();
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            
            if(!text) {
                return;
            }

            agregarBurbujaTutor(text, 'user');
            input.value = "";

            const prompt = `
ROLE: Eres "Doc", el Asistente de Admisiones de la instituci√≥n. Tu objetivo es ayudar a los visitantes a elegir un curso, explicar m√©todos de pago y motivarlos a inscribirse. S√© amable, persuasivo y breve.

CONTEXTO INSTITUCIONAL: ${institutionContext}

CURSOS DISPONIBLES: ${cursosContext}

PREGUNTA DEL VISITANTE: "${text}"

INSTRUCCIONES:
1. Responde de forma clara y √∫til orientado a ventas
2. Si preguntan por un curso espec√≠fico, destaca sus beneficios
3. Menciona opciones de pago: efectivo, tarjetas, financiaci√≥n
4. Incluye un llamado a la acci√≥n para contactar o inscribirse
5. Usa emojis apropiados para hacerlo amigable
6. S√© conciso (m√°ximo 150 palabras)

RESPUESTA:
            `;

            await consultarGemini(prompt);
        }

        async function consultarGemini(prompt) {
            const loadingId = mostrarLoading();
            
            try {
                // Obtener API key desde app_secrets
                const { data: secretResult, error: secretError } = await db
                    .from('app_secrets')
                    .select('value')
                    .eq('name', 'gemini_api_key');
                    
                if(secretError) {
                    throw new Error(`Error BD: ${secretError.message}`);
                }
                
                if(!secretResult || secretResult.length === 0) {
                    throw new Error("API key no configurada.");
                }
                
                const apiKey = secretResult[0].value?.trim();
                if(!apiKey) {
                    throw new Error("API key vac√≠a.");
                }

                // Llamar a Gemini 1.5 Flash
                const model = 'gemini-1.5-flash';
                const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        contents: [{ 
                            parts: [{ text: prompt }] 
                        }],
                        generationConfig: {
                            temperature: 0.8,
                            maxOutputTokens: 500,
                        }
                    })
                });

                if(!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(`API Gemini: ${errorData.error?.message || response.statusText}`);
                }

                const data = await response.json();
                removerLoading(loadingId);
                
                const reply = data.candidates?.[0]?.content?.parts?.[0]?.text 
                    || "¬°Hola! Soy Doc, tu asistente de admisiones. Estoy aqu√≠ para ayudarte a elegir el curso perfecto. ¬øQu√© te gustar√≠a saber sobre nuestros programas? üòä";
                
                agregarBurbujaTutor(marked.parse(reply), 'bot');

            } catch(error) {
                console.error("Error consultando Gemini:", error);
                removerLoading(loadingId);
                
                let errorMsg = "‚ö†Ô∏è Estoy teniendo problemas para conectarme. ";
                if(error.message.includes('API key')) {
                    errorMsg = "‚ö†Ô∏è Configuraci√≥n incompleta del asistente.";
                }
                
                agregarBurbujaTutor(`${errorMsg} Por favor, contacta directamente al asesor.`, 'bot');
            }
        }

        function mostrarLoading() {
            const container = document.getElementById('chat-messages');
            const id = 'load-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = "flex gap-3 chat-bubble";
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 overflow-hidden shrink-0 border border-blue-300 mt-1 flex items-center justify-center">
                    <span class="text-sm">ü¶â</span>
                </div>
                <div class="bg-white p-4 rounded-2xl rounded-tl-none border border-gray-200 flex gap-1 items-center h-10">
                    <span class="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce"></span>
                    <span class="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce delay-100"></span>
                    <span class="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce delay-200"></span>
                </div>
            `;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
            return id;
        }

        function removerLoading(id) {
            const el = document.getElementById(id);
            if(el) el.remove();
        }

        function agregarBurbujaTutor(htmlContent, type) {
            const container = document.getElementById('chat-messages');
            const div = document.createElement('div');
            
            if (type === 'user') {
                div.className = "flex gap-3 flex-row-reverse chat-bubble";
                div.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center shrink-0 shadow">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm p-3 rounded-2xl rounded-tr-none shadow-md max-w-[85%]">
                        ${htmlContent}
                    </div>
                `;
            } else {
                const badge = document.getElementById('doc-badge-header').innerText;
                div.className = "flex gap-3 chat-bubble";
                div.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 overflow-hidden shrink-0 border border-blue-300 mt-1 flex items-center justify-center relative">
                        <span class="text-sm select-none">ü¶â</span>
                        <span class="absolute -bottom-1 -right-1 text-[8px] bg-white rounded-full w-3 h-3 flex items-center justify-center border border-blue-100">
                            ${badge}
                        </span>
                    </div>
                    <div class="bg-white text-gray-700 text-sm p-3 rounded-2xl rounded-tl-none border border-gray-200 shadow-sm max-w-[90%] prose prose-sm leading-snug">
                        ${htmlContent}
                    </div>
                `;
            }
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function borrarHistorial() {
            if(confirm("¬øBorrar todo el historial de chat?")) {
                document.getElementById('chat-messages').innerHTML = `
                    <div class="flex gap-3 chat-bubble">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 overflow-hidden shrink-0 border border-blue-300 mt-1 flex items-center justify-center relative">
                            <span class="text-sm">ü¶â</span>
                            <span class="absolute -bottom-1 -right-1 text-[8px] bg-white rounded-full w-3 h-3 flex items-center justify-center border border-blue-100">üéì</span>
                        </div>
                        <div class="bg-white text-gray-700 text-sm p-3 rounded-2xl rounded-tl-none border border-gray-200 shadow-sm max-w-[90%] prose prose-sm leading-snug">
                            ¬°Hola! Soy <strong>Doc</strong>, tu asistente de admisiones. üòä

Estoy aqu√≠ para ayudarte a:
‚úÖ Elegir el curso ideal para tus objetivos
‚úÖ Explicar m√©todos de pago y financiaci√≥n  
‚úÖ Contarte sobre certificaciones y salida laboral
‚úÖ Motivarte a dar el siguiente paso en tu carrera

¬øEn qu√© puedo asistirte hoy?
                        </div>
                    </div>
                `;
            }
        }

        function accionarTutor(accion) {
            if(accion === 'popular') {
                agregarBurbujaTutor('¬øCu√°les son los cursos m√°s populares?', 'user');
                consultarGemini(`Dime cu√°les son los 3 cursos m√°s populares o vendidos y por qu√© son tan elegidos. Incluye beneficios principales de cada uno.`);
            } else if (accion === 'financiacion') {
                agregarBurbujaTutor('¬øQu√© opciones de pago y financiaci√≥n tienen?', 'user');
                consultarGemini(`Explica las opciones de pago disponibles: efectivo, tarjetas de cr√©dito, d√©bito, transferencia y financiaci√≥n. Incluye si hay descuentos por pago total.`);
            } else if (accion === 'certificacion') {
                agregarBurbujaTutor('¬øLos certificados son reconocidos?', 'user');
                consultarGemini(`Explica sobre la validez y reconocimiento de los certificados. Incluye si tienen validez nacional, internacional y qu√© instituciones los avalan.`);
            }
        }

        // ============================================
        // 6. FUNCIONES AUXILIARES Y EVENTOS
        // ============================================
        function inicializarEventos() {
            // Men√∫ m√≥vil
            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (menuToggle && mobileMenu) {
                menuToggle.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                    const icon = menuToggle.querySelector('i');
                    if (icon.classList.contains('fa-bars')) {
                        icon.classList.replace('fa-bars', 'fa-times');
                    } else {
                        icon.classList.replace('fa-times', 'fa-bars');
                    }
                });
            }
            
            // Cerrar modal
            const closeModal = document.getElementById('close-modal');
            const modal = document.getElementById('modal-curso');
            
            if (closeModal && modal) {
                closeModal.addEventListener('click', () => {
                    modal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                    // Limpiar URL si ven√≠a de un curso espec√≠fico
                    if (window.location.search.includes('id=')) {
                        const url = new URL(window.location);
                        url.searchParams.delete('id');
                        window.history.replaceState({}, '', url);
                    }
                });
                
                // Cerrar al hacer clic fuera del modal
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                        document.body.style.overflow = 'auto';
                    }
                });
            }
            
            // Cerrar modal con ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('modal-curso');
                    if (modal && !modal.classList.contains('hidden')) {
                        modal.classList.add('hidden');
                        document.body.style.overflow = 'auto';
                    }
                    
                    // Tambi√©n cerrar chatbot si est√° abierto
                    const chatWindow = document.getElementById('tutor-window');
                    if (chatWindow && !chatWindow.classList.contains('hidden')) {
                        toggleTutor();
                    }
                }
            });
            
            // Formulario de inscripci√≥n
            const formInscripcion = document.getElementById('form-inscripcion');
            if (formInscripcion) {
                formInscripcion.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    if (!instGlobal) {
                        alert('Error: No se identific√≥ la instituci√≥n');
                        return;
                    }
                    
                    const formData = new FormData(formInscripcion);
                    const btnSubmit = formInscripcion.querySelector('button[type="submit"]');
                    const originalText = btnSubmit.innerHTML;
                    
                    // Estado de carga
                    btnSubmit.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Enviando...';
                    btnSubmit.disabled = true;
                    
                    try {
                        const leadData = {
                            nombre: formData.get('nombre'),
                            email: formData.get('email'),
                            telefono: formData.get('telefono'),
                            curso_interes: formData.get('curso-interes') || 'Consulta General',
                            institution_id: instGlobal.id,
                            fuente: 'Portal SaaS Premium',
                            status: 'nuevo',
                            created_at: new Date().toISOString()
                        };
                        
                        console.log('üì§ Enviando lead:', leadData);
                        
                        const { error } = await db.from('leads').insert([leadData]);
                        
                        if (error) {
                            throw new Error(`Error al guardar: ${error.message}`);
                        }
                        
                        // √âxito
                        btnSubmit.innerHTML = '<i class="fas fa-check mr-2"></i> ¬°Solicitud enviada!';
                        btnSubmit.style.background = 'linear-gradient(to right, #10b981, #059669)';
                        
                        // Redirigir a WhatsApp si hay tel√©fono
                        setTimeout(() => {
                            if (instGlobal.telefono_contacto) {
                                const wppNum = instGlobal.telefono_contacto.replace(/[^0-9]/g, '');
                                const mensaje = encodeURIComponent(
                                    `¬°Hola! Acabo de enviar mi solicitud en el portal de ${instGlobal.nombre} para el curso "${formData.get('curso-interes')}".\n\n` +
                                    `Mis datos:\n` +
                                    `‚Ä¢ Nombre: ${leadData.nombre}\n` +
                                    `‚Ä¢ Tel√©fono: ${leadData.telefono}\n` +
                                    `‚Ä¢ Email: ${leadData.email}\n\n` +
                                    `Me gustar√≠a recibir m√°s informaci√≥n sobre este programa.`
                                );
                                window.open(`https://wa.me/${wppNum}?text=${mensaje}`, '_blank');
                            }
                        }, 1500);
                        
                        // Resetear formulario
                        setTimeout(() => {
                            formInscripcion.reset();
                            btnSubmit.innerHTML = originalText;
                            btnSubmit.style.background = '';
                            btnSubmit.disabled = false;
                            modal.classList.add('hidden');
                            document.body.style.overflow = 'auto';
                        }, 4000);
                        
                    } catch (error) {
                        console.error('‚ùå Error en formulario:', error);
                        alert(`Error: ${error.message}`);
                        btnSubmit.innerHTML = originalText;
                        btnSubmit.disabled = false;
                    }
                });
            }
            
            // Smooth scroll para enlaces internos
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href === '#') return;
                    
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        // Cerrar men√∫ m√≥vil si est√° abierto
                        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                            const icon = menuToggle.querySelector('i');
                            if (icon.classList.contains('fa-times')) {
                                icon.classList.replace('fa-times', 'fa-bars');
                            }
                        }
                        
                        window.scrollTo({
                            top: target.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        // Funci√≥n global para abrir modal desde botones
        window.abrirModalCurso = function(cursoId) {
            // Actualizar URL con el ID del curso
            const url = new URL(window.location);
            url.searchParams.set('id', cursoId);
            window.history.pushState({}, '', url);
            
            cargarDetalleCurso(cursoId);
        };

        // ============================================
        // INICIAR APLICACI√ìN
        // ============================================
        document.addEventListener('DOMContentLoaded', initPortal);
        
        // Manejar navegaci√≥n atr√°s/adelante
        window.addEventListener('popstate', () => {
            const params = new URLSearchParams(window.location.search);
            const courseId = params.get('id');
            const modal = document.getElementById('modal-curso');
            
            if (courseId) {
                if (modal && modal.classList.contains('hidden')) {
                    cargarDetalleCurso(courseId);
                }
            } else {
                if (modal && !modal.classList.contains('hidden')) {
                    modal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }
            }
        });
    </script>
</body>
</html>
